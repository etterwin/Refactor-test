(function(h){if(!h.LPJL){parseInt(1E10*Math.random());var k=function(){};k.META={name:"LPJL",description:"Loveplanet.ru JavaScript library.",version:"0.1"};k.fn=k.prototype;k.use=function(e){if(!e)return console?console.error("\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443!"):void 0,null;var a=k[e];return"undefined"===typeof a?(console?console.error('\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 "'+e+'" \u043d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0430.'):
void 0,null):a};k.namespace=function(e){var a=k[e];"undefined"===typeof a&&(a=k[e]={});return a};var g=function(e){this.init(e)};g.prototype.init=function(e){this.name=e.name||"noname";this.version=e.version||"noversion";this.description=e.description||"nodescription"};g.prototype.getName=function(){return this.name};g.prototype.getVersion=function(){return this.version};g.prototype.getDescription=function(){return this.description};g.prototype.info=function(){console&&console.log&&console.log(this.name+
"("+this.version+"): "+this.description)};k.createModule=function(e){var a=new g({name:e.name||"noname",version:e.version||"noversion",description:e.description||"nodescription"});"undefined"!==typeof e.name&&(this[e.name]=a);return a};k.createClass=function(e,a){var b=function(){this.init.apply(this,arguments)};b.prototype=new g({name:a.name||"noname",version:a.version||"noversion",description:a.description||"nodescription"});b.prototype.init=e;"undefined"!==typeof a.name&&(this[a.name]=b);return b};
k.extend=function(e,a){var b=Object.prototype.hasOwnProperty,c;for(c in a)if(b.call(a,c)){var d=a[c];try{e[c]=d}catch(f){}}};h.LPJL=k}})(window);(function(){var h,k,g,e=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};k=this.LPJL||(console?console.error("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443 LPJL"):void 0);g=this;h=this.document;k=k.createModule({name:"events",version:"0.1",description:"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043e\u0431\u043b\u0435\u0433\u0447\u0430\u044e\u0449\u0430\u044f \u043a\u0440\u043e\u0441\u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043d\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 \u0441\u043e\u0431\u044b\u0442\u0438\u044f\u043c\u0438"});
k.triggerEvent=function(a,b){var c,d;h.createEvent?(c=h.createEvent("HTMLEvents"),c.initEvent(b,!0,!0)):h.createEventObject&&(c=h.createEventObject(),c.eventType=b);c.eventName=b;g.DEBUG&&console.log("EVENT: ",c);if(a.dispatchEvent)a.dispatchEvent(c);else if(a.fireEvent)try{a.fireEvent("on"+c.eventType,c)}catch(f){if("function"===typeof a[d="on"+b])a[d](c)}else if("hashchange"===b)a["on"+b](c)};k.addListener=function(a,b,c,d){var f,s;"undefined"!==typeof d&&(f=Array.prototype.slice,f=f.call(arguments,
4),f.push(b),f.unshift(d),f.unshift(c),f=this.proxy.apply(this,f));b.addEventListener?b.addEventListener(a,f||c,!1):b.attachEvent&&("hashchange"!==a?"undefined"!==typeof b["on"+a]?b.attachEvent("on"+a,f||c):b["on"+a]=f||c:(g.DEBUG&&console.log("type = hashchange"),(s="on"+a,0<=e.call(g,s))&&(void 0===h.documentMode||7<h.documentMode)?b.attachEvent("on"+a,f||c):b["on"+a]=f||c));return f||c};k.removeListener=function(a,b,c){if(a.removeEventListener)return a.removeEventListener(b,c,!1);if(a.detachEvent)return"object"===
typeof a["on"+b]?a.detachEvent("on"+b,c):a["on"+b]=null};k.stopDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};k.getCharCode=function(a){var b;b=0;"undefined"===typeof a.which?b=a.keyCode:0===a.which||0===a.keyCode&&0===a.charCode||(b=a.which);return b};k.proxy=function(a,b){var c,d,f;f=Array.prototype.slice;d=Array.prototype.concat;c=f.call(arguments,2);return function(){var s;s=f.call(arguments);s=d.call(s,c);return a.apply(b,s)}}}).call(this);(function(){var h,k,g,e,a,b,c={}.hasOwnProperty;h=this.LPJL||(console?console.error("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443 LPJL"):void 0);b=this;k=this.document;a=h.createModule({name:"dom",version:"0.1",description:"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043e\u0431\u043b\u0435\u0433\u0447\u0430\u0435\u0442 \u043a\u0440\u043e\u0441\u0441\u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043d\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 DOM."});
a.insertAfter=function(d,f){var a;(a=d.nextSibling)?d.parentNode.insertBefore(f,a):d.parentNode.appendChild(f);return null};a.nextElement=function(d){d=d.nextSibling;return null===d?null:"#text"===d.nodeName?this.nextElement(d):d};a.prevElement=function(d){d=d.previousSibling;return null===d?null:"#text"===d.nodeName?this.prevElement(d):d};a.getChildNodes=function(d){var a,b,c,e;if(!d)return null;a=d.childNodes;b=[];c=0;for(e=a.length;c<e;c++)(d=a[c])&&1!==d.nodeType||b.push(d);return b};a.removeChildren=
function(d){d.innerHTML="";return null};a.getSiblingByClass=function(d,a){var b,c,e,g;c=d.parentNode.childNodes;e=0;for(g=c.length;e<g;e++){b=c[e];if(this.hasClass(b,a))return b;null}};a.hasClass=function(d,a){var b,c;if(d&&a){c=a.replace(/\-/g,"_");b=d.className;if(!b)return!1;b=b.replace(/\-/g,"_");c=RegExp("\\b"+c+"\\b");return c.test(b)}};a.addClass=function(d,a){d&&"undefined"!==typeof d.className&&!this.hasClass(d,a)&&(d.className+=" "+a);return null};a.removeClass=function(d,a){if(d&&this.hasClass(d,
a))return d.className=d.className.replace(RegExp("(\\s|^)"+a+"(\\s|$)")," ").replace(/^\s+|\s+$/g,"")};e=function(d,a){return d===a?!0:d===k||null===d?!1:e(d.parentNode,a)};a.isChild=function(d,a){return e(d,a)};a.getOffset=function(d){var a,c,e,g,h;d=d.getBoundingClientRect();a=k.body;e=k.documentElement;h=b.pageYOffset||e.scrollTop||a.scrollTop;g=b.pageXOffset||e.scrollLeft||a.scrollLeft;c=e.clientTop||a.clientTop||0;a=e.clientLeft||a.clientLeft||0;c=d.top+h-c;d=d.left+g-a;return{top:Math.round(c),
left:Math.round(d)}};a.getById=function(a){return k.getElementById(a)};a.getByClass=function(a,f){return(f||k).querySelectorAll(a)};a.getSrcByClass=function(d,f,b){var c;c=function(d,f,b){d=d.parentNode;return a.hasClass(d,b)?d:d===f||null===d?null:c(d,f,b)};return this.hasClass(d,b)?d:c(d,f,b)};a.getSrcByAttr=function(a,f,b,c){var e;e=function(a,d,b,f){a=a.parentNode;return null===a?null:a.getAttribute(b)===f?a:a===d||null===a?null:e(a,d,b,f)};return a.getAttribute(b)===c?a:e(a,f,b,c)};a.byClass=
function(a,b){var c,e,g,h,l;g=[].slice;c=b||k;e=[];if(c.getElementsByClassName)c=c.getElementsByClassName(a),e=g.call(c);else for(c=c.querySelectorAll("."+a),h=0,l=c.length;h<l;h++)g=c[h],e.push(g);return e};a.byTag=function(a,b){return[].slice.call((b||k).getElementsByTagName(a))};g=function(a,b){var c,e,g;if("auto"===a.currentStyle[b]){if("width"===b)return a.offsetWidth+"px";if("height"===b)return a.offsetHeight+"px";g=a.currentStyle[b]||0;c=a.style.left;e=a.runtimeStyle.left;a.runtimeStyle.left=
a.currentStyle.left;a.style.left="fontSize"===b?"1em":g;g=a.style.pixelLeft+"px";a.style.left=c;a.runtimeStyle.left=e;return g}return a.currentStyle[b]};a.animate=function(a,f,e,h){var k,n,l,r,p,m,t,q;l={};l.el=a;l.times=parseInt(e/10);l.anim={};e=!1;"undefined"!==typeof b.getComputedStyle?t=getComputedStyle(a):(t=a.currentStyle,e=!0);for(m in f)c.call(f,m)&&(q=f[m],e?(r=t[m],a.style[m]=r,p=parseInt(g(a,m))):p=parseInt(t[m]),a.style[m]=e?p:p+"px","undefined"!==typeof p&&(n=q,r=parseInt(n/l.times),
n=parseInt(n%l.times),0!==r&&(l.anim[m]={delta:r,append:n})));k=function(a){return function(){var d,f;if(0<a.times){f=a.anim;for(m in f)c.call(f,m)&&(d=f[m],p=parseInt(a.el.style[m]),q=p+d.delta,1===a.times&&(q+=d.append),a.el.style[m]=q+"px");a.times-=1;b.setTimeout(k,10)}else"function"===typeof h&&h()}}(l);k()}}).call(this);(function(h,k){var g=k.createModule({name:"utils",version:"0.1",description:"Contents log-module and message-module."}),e=k.use("events"),a=h.document,b=a.createElement("div");b.id="utils-console";h.onload=function(){!a.createEvent&&a.createEventObject&&a.body.appendChild(b)};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,
"")},String.prototype.fulltrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")});Array.prototype.forEach||(Array.prototype.forEach=function(a,d){for(var b=0,e=this.length;b<e;++b)a.call(d,this[b],b,this)});g.log=function(){if(!h.DEBUG)return!1;try{h.console.log.apply?h.console.log.apply(console,arguments):h.console.log([].join.call(arguments,""))}catch(c){try{opera.postError.apply(opera,arguments)}catch(d){var f=a.createElement("div"),e=[].slice(arguments),e=
a.createTextNode([].join.call(e,""));f.appendChild(e);b.appendChild(f)}}return!0};g.error=function(){if(!h.DEBUG)return!1;try{h.console.error&&h.console.error.apply(console,arguments)}catch(a){}};g.Notificator=function(b){b=b||{};var d={},f=0,g=b.categories||["popup-msg notice","popup-msg error"],k=b.container||a.body,u=b.life||5;return{getId:function(){for(var a in d);a||(f=0);return f+=1},show:function(b,f){var c=b||" ";f=f||{};var p=k||f.cont,m=f.cat&&f.cat<g.length?f.cat:0,t=f.life||u,q=a.createElement("div");
q.className=g[m];q.innerHTML=c;c=this.getId();d[c]={el:q,cont:p,timer:!1};p?(p.appendChild(q),p=h.setTimeout(e.proxy(function(a){this.__remove(a)},this,c),1E3*t),d[c].timer=p,e.addListener("click",q,e.proxy(function(a,d){this.__remove(d)},this,c))):e.addListener("load",h,e.proxy(function(b,f){var c=d[f];c.cont=c.cont||a.body;c.cont.appendChild(c.el);var g=h.setTimeout(e.proxy(function(a){this.__remove(a)},this,f),1E3*t);c.timer=g;e.addListener("click",c.el,e.proxy(function(a,d){this.__remove(d)},
this,f))},this,c))},__remove:function(a){if(a=d[a])h.clearTimeout(a.timer),a.cont&&a.cont.removeChild(a.el)}}}})(window,LPJL);(function(){var h,k;h=this.LPJL||(console?console.error("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443 LPJL"):void 0);k=this;h=h.createModule({name:"http",version:"0.1",description:"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0449\u0430\u044f \u043a\u0440\u043e\u0441\u0441\u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043d\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 AJAX."});
h.init=function(){var g;g=null;return function(){var e,a,b,c;if(null!==g)if(e=["MSXML2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"],XMLHttpRequest)g=new XMLHttpRequest;else for(b=0,c=e.length;b<c;b++){a=e[b];try{g=new ActiveXObject(a);break}catch(d){}}return g}}();h.req=function(){var g,e,a,b,c;a=null;g=["MSXML2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];if(XMLHttpRequest)a=new XMLHttpRequest;else for(b=0,c=g.length;b<c;b++){e=g[b];try{a=new ActiveXObject(e);break}catch(d){}}return a};
h.getJSON=function(g,e,a,b){var c,d;d=this.req();d.link=g;d.onreadystatechange=function(){var a,b;if(4!==d.readyState||200!==d.status)return!1;k.DEBUG_HTTP&&console.log("LINK_TO: ",d.link);b=d.responseText;0===b.length&&(b="{}",k.DEBUG_HTTP&&(console.log("XHR.LINK:",d.link),console.log("XHR.RESPONSE: ",d.responseText)));a={};try{a=JSON.parse(b)}catch(c){a=eval("("+b+")")}e(a)};if(a){d.open("POST",g);d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");g=b||{};a="";
for(c in g)b=g[c],a+=c+"="+b+"&";k.DEBUG_HTTP&&console.log("Params: ",a);d.send(a)}else d.open("GET",g),d.send("");return null};h.getText=function(g,e){var a;a=this.req();a.link=g;a.onreadystatechange=function(){return 4!==a.readyState||200!==a.status?!1:e(a.responseText)};a.open("GET",g);return a.send("")}}).call(this);(function(){var h,k={}.hasOwnProperty;h=function(){function g(e,a){this.data=e;this.tmp={};this.listeners={};this.error;this.sync="function"===typeof a?a:null}g.prototype.listen=function(e,a){if("any"===e||"undefined"!==typeof this.data[e])this.listeners[e]=this.listeners[e]||[],"function"===typeof a&&this.listeners[e].push(a)};g.prototype.detach=function(e,a){var b,c,d,f;if("undefined"!==typeof this.listeners[e])for(b=this.listeners[e],d=0,f=b.length;d<f;d++)if(c=b[d],c===a)return b.splice(d,1),
!0;return!1};g.prototype.set=function(e,a,b){var c,d,f,g;if("undefined"!==typeof this.data[e]){d=this.data[e];this.data[e]=a;if(!b){a=this.listeners[e]||[];f=0;for(g=a.length;f<g;f++)b=a[f],b({element:e,oldValue:d,value:data});a=this.listeners.data||[];e={};f=this.data;for(c in f)k.call(f,c)&&(b=f[c],e[c]=b);c=0;for(f=a.length;c<f;c++)b=a[c],b(e,this.error)}return d}};g.prototype.get=function(e,a){var b,c,d,f;if("undefined"===typeof e){c={};f=this.data;for(b in f)k.call(f,b)&&(d=f[b],c[b]=d);return c}c=
this.data[e];return"undefined"===typeof c?a:c};return g}();this.LPJL.Model=h}).call(this);(function(){var h,k,g,e,a,b={}.hasOwnProperty;e=this.LPJL;k=e.use("dom");g=e.use("events");a=e.use("utils");h=function(){function c(a){this.elements={};a&&this.__init(a)}c.prototype.__init=function(d){var c,e,g;a.log("Presenter init.",d);if("undefined"===typeof d)return 0;this.model=d.model||null;this.view=this.__getElement(d.view)||null;g=this.listeners||{};c=this.actions||{};a.log("Listeners: ",g);a.log("Actions: ",c);for(e in g)b.call(g,e)&&(d=g[e],a.log("eve_elem: ",e,", action_name: ",d),"undefined"!==
typeof c[d]&&this.addEvent(e,c[d]))};c.prototype.addEvent=function(b,c){var e,h;e=b.split(" ");h=e[0];e=e[1];a.log("addEvent: ",h," on element: ",e);e=e?this.__getElement(e):this.view;a.log("Element: ",e);g.addListener(h,e,c,this)};c.prototype.__getElement=function(a){var b;b=this.elements[a];b||((b=k.getById(a))?this.elements[a]=b:"undefined"!==typeof console&&null!==console&&console.log('Error: element "#',a,'" not found in DOM.'));return b};return c}();e.Presenter=h}).call(this);(function(){var h,k;h=this.LPJL||(console?console.error("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443 LPJL"):void 0);k=h.use("utils");h=h.createModule({name:"async",version:"0.1",description:"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0434\u043b\u044f \u043e\u0440\u0433\u0430\u043d\u0437\u0430\u0446\u0438\u0438 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u0444\u0443\u043d\u043a\u0446\u0438\u0439."});
h.parallel=function(g,e){var a,b,c,d,f,h;a=0;c=[];f=0;for(h=g.length;f<h;f++)d=g[f],b=function(b){return function(d,f){k.log(b,a,f);c[b]=f;a-=1;if(0===a)return e(c)}}(f),a+=1,d(b);return null};h.waterfall=function(g,e){var a,b,c;a=g.length;b=0;if(0===g.length)return!1;c=function(d,f){if(d)return e(d,f);b+=1;return a>b?g[b](f,c):e(d,f)};return g[b](c)}}).call(this);(function(){var h;h=this.LPJL;h.use("utils");h.slooper=function(h){var g,e,a,b,c,d;d=[];b=g=0;c=h||1E3;e=null;a=Math.floor(1E5*Math.random());h=function(f){var h,k,u,n,l,r;"function"===typeof f&&(k=f);if(k)u=g+=1,d.push({id:g,times:0,useful:k,paused:!1}),0===b&&(n=!0),b+=1;else if("number"!==typeof f)return!1;if(k&&n||"number"===typeof f){l=0;for(r=d.length;l<r;l++)if(n=d[l],!n.paused){n.times+=1;try{n.useful(n.times)}catch(p){k=p,"undefined"!==typeof console&&null!==console&&console.error("ERR: ",
k),"undefined"!==typeof console&&null!==console&&console.log("err: ",n.useful)}}h=arguments.callee;e=setTimeout(function(){return h(a)},c)}return u?u:!1};h.pause=function(a){var c,e;if(a){a:{var g;e=0;for(g=d.length;e<g;e++)if(c=d[e],c.id===a){a=c;break a}a=void 0}a&&(a.paused=!0,b-=1)}else for(c=0,e=d.length;c<e;c++)a=d[c],null!==a.loopId&&(a.paused=!0,b-=1)};h.resume=function(a){var c,e;if(a){a:{var g;e=0;for(g=d.length;e<g;e++)if(c=d[e],c.id===a){a=c;break a}a=void 0}a&&(a.paused=!1,b+=1)}else for(c=
0,e=d.length;c<e;c++)a=d[c],a.paused&&(a.paused=!1,b+=1)};h.works=function(){return[d,e]};return h}}).call(this);
